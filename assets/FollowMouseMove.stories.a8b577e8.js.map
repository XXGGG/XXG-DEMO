{"version":3,"file":"FollowMouseMove.stories.a8b577e8.js","sources":["../../plugin-vue:export-helper","../../src/components/FollowMouseMove.vue"],"sourcesContent":["\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\r\n  <div class=\"area\" @mouseleave=\"mouseleave\">\r\n    <h1>移动这个小方块！</h1>\r\n    <div id=\"box\" class=\"box\" @touchstart=\"touchstart\" @mousedown.left=\"mousedown\" @touchend=\"touchend\"\r\n      @mouseup=\"mouseup\"></div>\r\n    <h1>（ {{ X }} , {{ Y }} ）</h1>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue';\r\n\r\nlet move:any = null\r\nlet WT_W:any = null\r\nlet WT_H:any = null\r\nlet CK_X = null\r\nlet CK_Y = null\r\n\r\nlet moveing = 0\r\n\r\nlet X = ref(0)\r\nlet Y = ref(0)\r\nconst mousedown = (box:any) => { //在鼠标点下的时候抓紧 移动\r\n  WT_W = box.target.clientWidth\r\n  WT_H = box.target.clientWidth\r\n  move = (e:any) => {\r\n    CK_X = e.view.innerWidth\r\n    CK_Y = e.view.innerHeight\r\n    let left = e.clientX\r\n    let top = e.clientY\r\n    let boxSeatX = left - box.layerX\r\n    let boxSeatY = top - box.layerY\r\n    if (boxSeatX < 0) boxSeatX = 0 //当：box的x点小于窗口的 横方向x \r\n    if (boxSeatX > (CK_X - WT_W)) boxSeatX = CK_X - WT_W//当：box的x点大于 【窗口-物体宽度】的方向 \r\n    if (boxSeatY < 0) boxSeatY = 0\r\n    if (boxSeatY > (CK_Y - WT_H)) boxSeatY = CK_Y - WT_H//当：box的x点大于 【窗口-物体宽度】的方向 \r\n    box.target.style.left = boxSeatX + \"px\";\r\n    box.target.style.top = boxSeatY + \"px\";\r\n\r\n    X.value = boxSeatX\r\n    Y.value = boxSeatY\r\n  }\r\n  window.addEventListener('mousemove', move)\r\n  moveing = 1\r\n}\r\n\r\nconst mouseup = () => {  //松开鼠标的时候 取消监听\r\n  console.log(\"取消监听\")\r\n  window.removeEventListener('mousemove', move)\r\n  moveing = 0\r\n}\r\n\r\nconst mouseleave = () => { //离开外框框的时候\r\n  if (moveing == 1) {\r\n    console.log(\"取消监听\")\r\n    window.removeEventListener('mousemove', move)\r\n    moveing = 0\r\n  }\r\n}\r\nwindow.onresize = function () {\r\n  console.log(\"窗口变化了！\")\r\n  mouseleave();\r\n  let box:any = document.getElementById(\"box\");\r\n  box.style.left = \"calc(50% - 50px)\";\r\n  box.style.top = \"calc(50% - 50px)\";\r\n}\r\n\r\n\r\n// 以下是触摸拖拽\r\nlet touch:any = null\r\nconst touchstart = (box:any) => {\r\n  touch = (e:any) => {\r\n    console.log(e.targetTouches[0].pageX)\r\n    console.log(e.targetTouches[0].pageY)\r\n    console.log(e)\r\n    let left = e.targetTouches[0].pageX\r\n    let top = e.targetTouches[0].pageY\r\n    let boxSeatX = left - box.layerX\r\n    let boxSeatY = top - box.layerY\r\n    box.target.style.left = boxSeatX + \"px\";\r\n    box.target.style.top = boxSeatY + \"px\";\r\n\r\n    X.value = boxSeatX\r\n    Y.value = boxSeatY\r\n  }\r\n  window.addEventListener('touchmove', touch)\r\n}\r\n\r\nconst touchend = () => {\r\n  window.removeEventListener('touchmove', touch)\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  padding: 0;\r\n  margin: 0;\r\n  user-select: none;\r\n}\r\n\r\n.area {\r\n  user-select: none;\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #8f8f8f7d;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top:0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  /* background-color: #222; */\r\n  background-color: rgba(34, 34, 34, 0);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n\r\n.box {\r\n  width: 100px;\r\n  height: 100px;\r\n  position: absolute;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n\r\n.box::after {\r\n  content: '';\r\n  display: block;\r\n  width: 100px;\r\n  height: 100px;\r\n  border-radius: 12px;\r\n  background-color: #cf4b6f;\r\n  box-shadow: 0px 0px 20px -6px #cf4b6f;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.box:active::after {\r\n  box-shadow: 0px 0px 20px -6px #cf4b6f;\r\n  transform: scale(0.9);\r\n  transition: transform 0.5s;\r\n  -moz-transition: transform 0.5s;\r\n  -webkit-transition: transform 0.5s;\r\n  -o-transition: transform 0.5s;\r\n}\r\n</style>\r\n"],"names":[],"mappings":"iHACA,GAAA,GAAe,CAAC,EAAK,IAAU,CAC7B,KAAM,GAAS,EAAI,WAAa,EAChC,SAAW,CAAC,EAAK,IAAQ,GACvB,EAAO,GAAO,EAEhB,MAAO,EACT,qLCKA,GAAA,GAAA,KACA,EAAA,KACA,EAAA,KACA,EAAA,KACA,EAAA,KAEA,EAAA,EAEA,EAAA,EAAA,CAAA,EACA,EAAA,EAAA,CAAA,EACA,KAAA,GAAA,AAAA,GAAA,CACE,EAAA,EAAA,OAAA,YACA,EAAA,EAAA,OAAA,YACA,EAAA,AAAA,GAAA,CACE,EAAA,EAAA,KAAA,WACA,EAAA,EAAA,KAAA,YACA,GAAA,GAAA,EAAA,QACA,EAAA,EAAA,QACA,EAAA,EAAA,EAAA,OACA,EAAA,EAAA,EAAA,OACA,AAAA,EAAA,GAAkB,GAAA,GAClB,EAAA,EAAA,GAA8B,GAAA,EAAA,GAC9B,EAAA,GAAkB,GAAA,GAClB,EAAA,EAAA,GAA8B,GAAA,EAAA,GAC9B,EAAA,OAAA,MAAA,KAAA,EAAA,KACA,EAAA,OAAA,MAAA,IAAA,EAAA,KAEA,EAAA,MAAA,EACA,EAAA,MAAA,CAAU,EAEZ,OAAA,iBAAA,YAAA,CAAA,EACA,EAAA,CAAU,EAGZ,EAAA,IAAA,CACE,QAAA,IAAA,0BAAA,EACA,OAAA,oBAAA,YAAA,CAAA,EACA,EAAA,CAAU,EAGZ,EAAA,IAAA,CACE,AAAA,GAAA,GACE,SAAA,IAAA,0BAAA,EACA,OAAA,oBAAA,YAAA,CAAA,EACA,EAAA,EACF,EAEF,OAAA,SAAA,UAAA,CACE,QAAA,IAAA,sCAAA,EACA,IACA,GAAA,GAAA,SAAA,eAAA,KAAA,EACA,EAAA,MAAA,KAAA,mBACA,EAAA,MAAA,IAAA,kBAAgB,EAKlB,GAAA,GAAA,KACA,KAAA,GAAA,AAAA,GAAA,CACE,EAAA,AAAA,GAAA,CACE,QAAA,IAAA,EAAA,cAAA,GAAA,KAAA,EACA,QAAA,IAAA,EAAA,cAAA,GAAA,KAAA,EACA,QAAA,IAAA,CAAA,EACA,GAAA,GAAA,EAAA,cAAA,GAAA,MACA,EAAA,EAAA,cAAA,GAAA,MACA,EAAA,EAAA,EAAA,OACA,EAAA,EAAA,EAAA,OACA,EAAA,OAAA,MAAA,KAAA,EAAA,KACA,EAAA,OAAA,MAAA,IAAA,EAAA,KAEA,EAAA,MAAA,EACA,EAAA,MAAA,CAAU,EAEZ,OAAA,iBAAA,YAAA,CAAA,CAA0C,EAG5C,EAAA,IAAA,CACE,OAAA,oBAAA,YAAA,CAAA,CAA6C;;;;;;;;;;;;;;"}